<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <meta name="google-site-verification" content="1J8G8TayUzNXKEHTUsjyrcmSpj6n0j4lFtO6EtKRr-E" />

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="google-site-verification" content="true">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.sun1999.top","root":"/","scheme":"Mist","version":"7.8.0","exturl":true,"sidebar":{"position":"right","display":"hide","padding":18,"offset":20,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"livere","storage":true,"lazyload":false,"nav":null,"activeClass":"livere"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="文章多处参考自Hadoop: Setting up a Single Node Cluster  注意：测试环境中应有3台虚拟机，各自网卡UUID，IP，主机名均不同，一下信息仅为其中之一的配置 虚拟机信息 CentOS Linux release 7.6.1810 (Core)  Derived from Red Hat Enterprise Linux 7.6 (Source) Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Hadoop快速入门指南">
<meta property="og:url" content="http://www.sun1999.top/archives/31833.html">
<meta property="og:site_name" content="Sunny Grocery">
<meta property="og:description" content="文章多处参考自Hadoop: Setting up a Single Node Cluster  注意：测试环境中应有3台虚拟机，各自网卡UUID，IP，主机名均不同，一下信息仅为其中之一的配置 虚拟机信息 CentOS Linux release 7.6.1810 (Core)  Derived from Red Hat Enterprise Linux 7.6 (Source) Linux">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://image.sun1999.top/20190923223921.png">
<meta property="og:image" content="http://image.sun1999.top/20190923224032.png">
<meta property="og:image" content="http://image.sun1999.top/20190923224204.png">
<meta property="article:published_time" content="2019-09-22T06:00:05.000Z">
<meta property="article:modified_time" content="2021-02-14T07:06:43.121Z">
<meta property="article:author" content="Sunny Grocery">
<meta property="article:tag" content="BigData">
<meta property="article:tag" content="Hadoop">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://image.sun1999.top/20190923223921.png">

<link rel="canonical" href="http://www.sun1999.top/archives/31833.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Hadoop快速入门指南 | Sunny Grocery</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2fd60dce699a7df813aeff6a2451ebae";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sunny Grocery</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL1N1bm55R3JvY2VyeQ==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.sun1999.top/archives/31833.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sunny Grocery">
      <meta itemprop="description" content="Sunny Grocery小站">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sunny Grocery">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hadoop快速入门指南
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-22 14:00:05" itemprop="dateCreated datePublished" datetime="2019-09-22T14:00:05+08:00">2019-09-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BigData/" itemprop="url" rel="index"><span itemprop="name">BigData</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/BigData/Hadoop/" itemprop="url" rel="index"><span itemprop="name">Hadoop</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>10k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>19 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>文章多处参考自<span class="exturl" data-url="aHR0cHM6Ly9oYWRvb3AuYXBhY2hlLm9yZy9kb2NzL3N0YWJsZS9oYWRvb3AtcHJvamVjdC1kaXN0L2hhZG9vcC1jb21tb24vU2luZ2xlQ2x1c3Rlci5odG1s">Hadoop: Setting up a Single Node Cluster<i class="fa fa-external-link-alt"></i></span></p>
</blockquote>
<p>注意：测试环境中应有3台虚拟机，各自网卡UUID，IP，主机名均不同，一下信息仅为其中之一的配置</p>
<h2 id="虚拟机信息"><a href="#虚拟机信息" class="headerlink" title="虚拟机信息"></a>虚拟机信息</h2><ul>
<li><p>CentOS Linux release 7.6.1810 (Core) </p>
<p>Derived from Red Hat Enterprise Linux 7.6 (Source)</p>
<p>Linux hadoop10 3.10.0-957.27.2.el7.x86_64</p>
</li>
<li><p>账户信息</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>用户名</th>
<th>密码</th>
</tr>
</thead>
<tbody><tr>
<td>sun</td>
<td>123456</td>
</tr>
<tr>
<td>hadoop</td>
<td>123456</td>
</tr>
<tr>
<td>root</td>
<td>123456</td>
</tr>
</tbody></table>
<ul>
<li>测试hadoop时务必使用hadoop用户操作</li>
</ul>
<a id="more"></a>

<h2 id="网络配置详情"><a href="#网络配置详情" class="headerlink" title="网络配置详情"></a>网络配置详情</h2><h3 id="虚拟机外围配置"><a href="#虚拟机外围配置" class="headerlink" title="虚拟机外围配置"></a>虚拟机外围配置</h3><blockquote>
<p>环境：VMware® Workstation 15 Pro 15.0.0 build-10134415</p>
</blockquote>
<ul>
<li>虚拟网络VMnet配置</li>
</ul>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>外部链接</th>
<th>主机连接</th>
<th>DHCP</th>
<th>子网地址</th>
</tr>
</thead>
<tbody><tr>
<td>VMnet8</td>
<td>NAT模式</td>
<td>NAT模式</td>
<td>已连接</td>
<td>-</td>
<td>192.169.100.0</td>
</tr>
</tbody></table>
<ul>
<li><p>关闭DHCP服务</p>
</li>
<li><p>子网IP：192.168.100.0             子网掩码：255.255.255.0</p>
</li>
<li><p>网关IP：192.168.100.2</p>
</li>
<li><p>关闭IPV6</p>
</li>
</ul>
<!--more-->

<h3 id="虚拟机内配置"><a href="#虚拟机内配置" class="headerlink" title="虚拟机内配置"></a>虚拟机内配置</h3><ul>
<li><p>ip addr</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1</span>: <span class="string">lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span></span><br><span class="line">    <span class="meta">link/loopback</span> <span class="string">00:00:00:00:00:00 brd 00:00:00:00:00:00</span></span><br><span class="line">    <span class="attr">inet</span> <span class="string">127.0.0.1/8 scope host lo</span></span><br><span class="line">       <span class="attr">valid_lft</span> <span class="string">forever preferred_lft forever</span></span><br><span class="line">    <span class="attr">inet6</span> :<span class="string">:1/128 scope host </span></span><br><span class="line">       <span class="attr">valid_lft</span> <span class="string">forever preferred_lft forever</span></span><br><span class="line"><span class="attr">2</span>: <span class="string">ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span></span><br><span class="line">    <span class="meta">link/ether</span> <span class="string">00:0c:29:f1:16:d2 brd ff:ff:ff:ff:ff:ff</span></span><br><span class="line">    <span class="attr">inet</span> <span class="string">192.168.100.10/24 brd 192.168.100.255 scope global noprefixroute ens33</span></span><br><span class="line">       <span class="attr">valid_lft</span> <span class="string">forever preferred_lft forever</span></span><br><span class="line">    <span class="attr">inet6</span> <span class="string">fe80::711a:c906:a3e3:aed6/64 scope link noprefixroute </span></span><br><span class="line">       <span class="attr">valid_lft</span> <span class="string">forever preferred_lft forever</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>主要网络信息<code>/etc/sysconfig/network-scripts/ifcfg-ens33</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">BOOTPROTO</span>=<span class="string">static</span></span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="string">yes</span></span><br><span class="line"><span class="attr">IPADDR</span>=<span class="string">192.168.100.10</span></span><br><span class="line"><span class="attr">NETMASK</span>=<span class="string">255.255.255.0</span></span><br><span class="line"><span class="attr">GATEWAY</span>=<span class="string">192.168.100.2</span></span><br><span class="line"><span class="attr">DNS1</span>=<span class="string">114.114.114.114</span></span><br><span class="line"><span class="attr">DNS2</span>=<span class="string">8.8.8.8</span></span><br></pre></td></tr></table></figure></li>
<li><p>主机名<code>/etc/sysconfig/network</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">NETWORKING</span>=<span class="string">yes</span></span><br><span class="line"><span class="attr">HOSTNAME</span>=<span class="string">hadoop10</span></span><br></pre></td></tr></table></figure></li>
<li><p>HOSTS<code>/etc/hosts</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">127.0.0.1</span>   <span class="string">localhost localhost.localdomain localhost4 localhost4.localdomain4</span></span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"><span class="meta">192.168.100.10</span> <span class="string">hadoop10</span></span><br><span class="line"><span class="meta">192.168.100.11</span> <span class="string">hadoop11</span></span><br><span class="line"><span class="meta">192.168.100.12</span> <span class="string">hadoop12    </span></span><br></pre></td></tr></table></figure>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2></li>
<li><p>hadoop和jdk存放目录（注意 /opt 下的所有文件所有者一定是用户hadoop）</p>
<p><code>tree -L 1 /opt/modules/</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;opt&#x2F;modules&#x2F;</span><br><span class="line">├── hadoop-3.1.2</span><br><span class="line">└── jdk1.8.0_201</span><br></pre></td></tr></table></figure></li>
<li><p>环境变量</p>
<p><code>cat /etc/profile | tail -n 9</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#java</span></span><br><span class="line"><span class="attr">export</span> <span class="string">JAVA_HOME=/opt/modules/jdk1.8.0_201</span></span><br><span class="line"><span class="attr">export</span> <span class="string">PATH=$JAVA_HOME/bin:$PATH</span></span><br><span class="line"><span class="attr">export</span> <span class="string">CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#hadoop</span></span><br><span class="line"><span class="attr">export</span> <span class="string">HADOOP_HOME=/opt/modules/hadoop-3.1.2</span></span><br><span class="line"><span class="attr">export</span> <span class="string">PATH=$PATH:$HADOOP_HOME/sbin:$HADOOP_HOME/bin</span></span><br></pre></td></tr></table></figure>
<h2 id="示例运行"><a href="#示例运行" class="headerlink" title="示例运行"></a>示例运行</h2></li>
</ul>
<h4 id="一、Standalone-Operation-单机运算"><a href="#一、Standalone-Operation-单机运算" class="headerlink" title="一、Standalone Operation 单机运算"></a>一、Standalone Operation 单机运算</h4><blockquote>
<p>By default, Hadoop is configured to run in a non-distributed mode, as a single Java process. This is useful for debugging.</p>
<p>The following example copies the unpacked conf directory to use as input and then finds and displays every match of the given regular expression. Output is written to the given output directory.</p>
</blockquote>
<p><strong>Ⅰ.Grep</strong></p>
<ol>
<li><p>创建输入文件（pwd /opt/modules/hadoop-3.1.2/）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ mkdir input</span><br><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ cp etc/hadoop/*.xml input</span><br></pre></td></tr></table></figure></li>
<li><p>目录结构</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ tree input/</span><br><span class="line">input/</span><br><span class="line">├── capacity-scheduler.xml</span><br><span class="line">├── core-site.xml</span><br><span class="line">├── hadoop-policy.xml</span><br><span class="line">├── hdfs-site.xml</span><br><span class="line">├── httpfs-site.xml</span><br><span class="line">├── kms-acls.xml</span><br><span class="line">├── kms-site.xml</span><br><span class="line">├── mapred-site.xml</span><br><span class="line">└── yarn-site.xml</span><br></pre></td></tr></table></figure></li>
<li><p>启动示例（这里注意，output目录如果已经存在则会报错）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.2.jar grep input output &#x27;dfs[a-z.]+&#x27;</span><br></pre></td></tr></table></figure></li>
<li><p>结果（筛选符合正则的文件）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ output/part-r-00000 </span><br><span class="line">1	dfsadmin</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>Ⅱ.WordCount</strong></p>
<ol>
<li><p>创建输入文件（pwd /opt/modules/hadoop-3.1.2/）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ mkdir wcinput</span><br><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ cd wcinput</span><br><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ touch wc.input</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">以下是向wc.input中添加的内容</span></span><br><span class="line">hadoop mark</span><br><span class="line">hadoop yarn</span><br><span class="line">sun key  </span><br><span class="line">sun key</span><br></pre></td></tr></table></figure></li>
<li><p>启动示例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop@hadoop10 hadoop-3.1.2]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.2.jar wordcount wcinput wcoutput</span><br></pre></td></tr></table></figure>
</li>
<li><p>结果</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ cat wcoutput/part-r-00000 </span><br><span class="line">hadoop	2</span><br><span class="line">key	2</span><br><span class="line">mark	1</span><br><span class="line">sun	2</span><br><span class="line">yarn	1</span><br></pre></td></tr></table></figure>
<h4 id="二、Pseudo-Distributed-Operation-伪分布运算"><a href="#二、Pseudo-Distributed-Operation-伪分布运算" class="headerlink" title="二、Pseudo-Distributed Operation 伪分布运算"></a>二、Pseudo-Distributed Operation 伪分布运算</h4></li>
</ol>
<blockquote>
<p>Hadoop can also be run on a single-node in a pseudo-distributed mode where each Hadoop daemon runs in a separate Java process.</p>
</blockquote>
<ol>
<li><p>配置（pwd /opt/modules/hadoop-3.1.2/）</p>
<ul>
<li><code>vim etc/hadoop/core-site.xml</code>   </li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   指定HDFS 中NameNode 的地址</span></span><br><span class="line"><span class="comment">   注意，因为示例一依赖的是linux文件系统，所以配置此项过后示例一将无法运行</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!--规范来说应注意将localhost改为主机名--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop10:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">   指定Hadoop 运行时产生文件的存储目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">   	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">   		<span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/modules/hadoop-3.1.2/data/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">   	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>etc/hadoop/hdfs-site.xml</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">配置文件副本数，默认为3</span><br><span class="line">--&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.replication&lt;&#x2F;name&gt;</span><br><span class="line">        &lt;value&gt;1&lt;&#x2F;value&gt;</span><br><span class="line">    &lt;&#x2F;property&gt;</span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置Hadoop的JAVA_HOME</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vim etc/hadoop/hadoop-env.sh</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">添加/更改为</span></span><br><span class="line">export JAVA_HOME=/opt/modules/jdk1.8.0_201</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置ssh免密</p>
<p>Now check that you can ssh to the localhost without a passphrase:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh localhost</span></span><br></pre></td></tr></table></figure>
<p>If you cannot ssh to localhost without a passphrase, execute the following commands:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -P <span class="string">&#x27;&#x27;</span> -f ~/.ssh/id_rsa</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chmod 0600 ~/.ssh/authorized_keys</span></span><br></pre></td></tr></table></figure></li>
<li><p>格式化文件系统（Format the filesystem）</p>
<p>注意：只有第一次配置才需要格式化文件系统</p>
<p>因为配置过Hadoops /bin和/sbin下的环境变量，所以这里可以省略<code>bin/</code>和<code>sbin/</code>路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> bin/hdfs namenode -format</span></span><br></pre></td></tr></table></figure></li>
<li><p>启动NameNode和DataNode守护进程 (Start NameNode daemon and DataNode daemon)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ start-dfs.sh </span><br><span class="line">Starting namenodes on [hadoop10]</span><br><span class="line">Starting datanodes</span><br><span class="line">Starting secondary namenodes [hadoop10]</span><br><span class="line"><span class="meta">#</span><span class="bash">检查启动是否成功</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> jps</span></span><br><span class="line">3080 SecondaryNameNode</span><br><span class="line">2746 NameNode</span><br><span class="line">3213 Jps</span><br><span class="line">2863 DataNode</span><br></pre></td></tr></table></figure></li>
<li><p>浏览器查看web页面：Browse the web interface for the NameNode; by default it is available at:</p>
<p>NameNode - <code>http://localhost:9870/</code></p>
</li>
<li><p>hdfs文件操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">创建目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hdfs dfs -mkdir -p /home/hadoop/input、</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hdfs dfs -ls -R /</span></span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:30 /home</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:30 /home/hadoop</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:30 /home/hadoop/input</span><br><span class="line"><span class="meta">#</span><span class="bash">将linux文件传至hdfs文件系统</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hdfs dfs -put wcinput/wc.input /home/hadoop/input</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看目录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hdfs dfs -ls -R /</span></span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:30 /home</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:30 /home/hadoop</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:34 /home/hadoop/input</span><br><span class="line">-rw-r--r--   1 hadoop supergroup         42 2019-09-22 01:34 /home/hadoop/input/wc.input</span><br></pre></td></tr></table></figure></li>
<li><p>WordCount示例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">运行示例(记得output先删除掉)</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.2.jar wordcount /home/hadoop/input/wc.input /home/hadoop/output</span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看生成结果</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hdfs dfs -ls -R /</span></span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:30 /home</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:43 /home/hadoop</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:34 /home/hadoop/input</span><br><span class="line">-rw-r--r--   1 hadoop supergroup         42 2019-09-22 01:34 /home/hadoop/input/wc.input</span><br><span class="line">drwxr-xr-x   - hadoop supergroup          0 2019-09-22 01:43 /home/hadoop/output</span><br><span class="line">-rw-r--r--   1 hadoop supergroup          0 2019-09-22 01:43 /home/hadoop/output/_SUCCESS</span><br><span class="line">-rw-r--r--   1 hadoop supergroup         35 2019-09-22 01:43 /home/hadoop/output/part-r-00000</span><br><span class="line"><span class="meta">#</span><span class="bash">查看输出结果</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hdfs dfs -cat /home/hadoop/output/part*</span></span><br><span class="line">hadoop	2</span><br><span class="line">key	2</span><br><span class="line">mark	1</span><br><span class="line">sun	2</span><br><span class="line">yarn	1</span><br></pre></td></tr></table></figure>
<h3 id="三、YARN-on-a-Single-Node-单节点YARN"><a href="#三、YARN-on-a-Single-Node-单节点YARN" class="headerlink" title="三、YARN on a Single Node 单节点YARN"></a>三、YARN on a Single Node 单节点YARN</h3></li>
<li><p>配置（pwd /opt/modules/hadoop-3.1.2/）</p>
<ul>
<li><code>vim etc/hadoop/mapred-site.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定mapreduce使用yarn--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>vim etc/hadoop/yarn-site.xml</code></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Reducer 获取数据的方式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定YARN 的ResourceManager 的地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop10<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>启动ResourceManager和NodeManager守护进程 （Start ResourceManager daemon and NodeManager daemon）</p>
</li>
</ol>
<ul>
<li><code>start-yarn.sh</code></li>
</ul>
<ol start="3">
<li><p>查看进程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ jps</span><br><span class="line">10800 Jps</span><br><span class="line">9988 ResourceManager</span><br><span class="line">5432 SecondaryNameNode</span><br><span class="line">5230 DataNode</span><br><span class="line">5119 NameNode</span><br><span class="line">10095 NodeManager</span><br></pre></td></tr></table></figure></li>
<li><p>浏览器查看web页面：Browse the web interface for the ResourceManager; by default it is available at:</p>
<ul>
<li>ResourceManager - <code>http://localhost:8088/</code></li>
</ul>
</li>
<li><p>WordCount示例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.2.jar wordcount /home/hadoop/input/wc.input /home/hadoop/output</span><br></pre></td></tr></table></figure></li>
<li><p>查看结果</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ hdfs dfs -cat /home/hadoop/output/part-r-00000</span><br><span class="line">hadoop	2</span><br><span class="line">key	2</span><br><span class="line">mark	1</span><br><span class="line">sun	2</span><br><span class="line">yarn	1</span><br></pre></td></tr></table></figure>
<h3 id="四、历史服务器"><a href="#四、历史服务器" class="headerlink" title="四、历史服务器"></a>四、历史服务器</h3></li>
<li><p>配置mapred-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--历史服务器端地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop10:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 历史服务器web 端地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop10:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$&#123;HADOOP_HOME&#125;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>运行Jobhistoryserver</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ mapred --daemon start historyserver</span><br></pre></td></tr></table></figure></li>
<li><p>查看进程 | 访问<code>http://hadoop10:19888/</code> 查看 jobhistory</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hadoop@hadoop10 hadoop-3.1.2]$ jps</span><br><span class="line">1408 NameNode</span><br><span class="line">2096 NodeManager</span><br><span class="line">3216 JobHistoryServer</span><br><span class="line">1970 ResourceManager</span><br><span class="line">1525 DataNode</span><br><span class="line">1736 SecondaryNameNode</span><br><span class="line">3309 Jps</span><br></pre></td></tr></table></figure>
<h3 id="五、日志聚集"><a href="#五、日志聚集" class="headerlink" title="五、日志聚集"></a>五、日志聚集</h3></li>
</ol>
<blockquote>
<p>简单记一下吧，其实都一样</p>
</blockquote>
<ol>
<li><p>配置yarn_site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志聚集功能使能--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志保留时间设置7 天--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Reducer 获取数据的方式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定YARN 的ResourceManager 的地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop10<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>关闭yarn(这里可以不重启hdfs和jobhistoryserver)</p>
</li>
<li><p>这里我删除了hdfs 下yarn生成的tmp文件，和原来wordcount输出的output文件</p>
</li>
<li><p>重启yarn</p>
</li>
<li><p>启动WordCount示例</p>
</li>
<li><p>访问<code>http://hadoop10:19888/jobhistory</code></p>
</li>
<li><p>找到刚刚完成的WordCount Job，应该也就一个</p>
<p><img src="http://image.sun1999.top/20190923223921.png"></p>
</li>
<li><p>进入log<br><img src="http://image.sun1999.top/20190923224032.png"></p>
</li>
<li><p>查看log,是这个亚子~<br> <img src="http://image.sun1999.top/20190923224204.png"></p>
</li>
</ol>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Sunny Grocery
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://www.sun1999.top/archives/31833.html" title="Hadoop快速入门指南">http://www.sun1999.top/archives/31833.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/BigData/" rel="tag"># BigData</a>
              <a href="/tags/Hadoop/" rel="tag"># Hadoop</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/archives/1759.html" rel="prev" title="数据库设计指南">
      <i class="fa fa-chevron-left"></i> 数据库设计指南
    </a></div>
      <div class="post-nav-item">
    <a href="/archives/39657.html" rel="next" title="完全分布式集群搭建">
      完全分布式集群搭建 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC80NDEzMy8yMDY2OA"></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BF%A1%E6%81%AF"><span class="nav-number">1.</span> <span class="nav-text">虚拟机信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E8%AF%A6%E6%83%85"><span class="nav-number">2.</span> <span class="nav-text">网络配置详情</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A4%96%E5%9B%B4%E9%85%8D%E7%BD%AE"><span class="nav-number">2.1.</span> <span class="nav-text">虚拟机外围配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%86%85%E9%85%8D%E7%BD%AE"><span class="nav-number">2.2.</span> <span class="nav-text">虚拟机内配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">3.</span> <span class="nav-text">环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E8%BF%90%E8%A1%8C"><span class="nav-number">4.</span> <span class="nav-text">示例运行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E3%80%81Standalone-Operation-%E5%8D%95%E6%9C%BA%E8%BF%90%E7%AE%97"><span class="nav-number">4.0.1.</span> <span class="nav-text">一、Standalone Operation 单机运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8C%E3%80%81Pseudo-Distributed-Operation-%E4%BC%AA%E5%88%86%E5%B8%83%E8%BF%90%E7%AE%97"><span class="nav-number">4.0.2.</span> <span class="nav-text">二、Pseudo-Distributed Operation 伪分布运算</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E3%80%81YARN-on-a-Single-Node-%E5%8D%95%E8%8A%82%E7%82%B9YARN"><span class="nav-number">4.1.</span> <span class="nav-text">三、YARN on a Single Node 单节点YARN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%8E%86%E5%8F%B2%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">4.2.</span> <span class="nav-text">四、历史服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E6%97%A5%E5%BF%97%E8%81%9A%E9%9B%86"><span class="nav-number">4.3.</span> <span class="nav-text">五、日志聚集</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sunny Grocery"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Sunny Grocery</p>
  <div class="site-description" itemprop="description">Sunny Grocery小站</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9zdW4taW4tbW92aWUvYWN0aXZpdGllcw==" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;sun-in-movie&#x2F;activities"><i class="fab fa-zhihu fa-fw"></i></span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly85OTYuaWN1LyMvemhfQ04=" title="996ICU → https:&#x2F;&#x2F;996.icu&#x2F;#&#x2F;zh_CN"><i class="fas fa-procedures fa-fw"></i></span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1N1bm55R3JvY2VyeQ==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;SunnyGrocery"><i class="fab fa-github fa-fw"></i></span>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        <div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sunny Grocery</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">132k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">4:01</span>
</div>
<div class="powered-by">
    Erstellt mit 
    <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a>
    <span class="post-meta-divider">|</span>
      <a href="https://beian.miit.gov.cn" rel="noopener external nofollow noreferrer" target="_blank" class="exturl" title="">陕ICP备19009013号-1</a>
</div>

        








      </div>
    </footer>
  </div>

  
  <script size="200" alpha="0.2" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

</body>
</html>
